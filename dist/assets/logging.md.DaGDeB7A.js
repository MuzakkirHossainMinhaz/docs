import{_ as i,c as a,a2 as t,o as e}from"./chunks/framework.C3fu0AGg.js";const g=JSON.parse('{"title":"Logging","description":"Learn how to implement robust logging in your IntentJS application using the winston-based logging framework, including log levels, transports, and formats.","frontmatter":{"title":"Logging","description":"Learn how to implement robust logging in your IntentJS application using the winston-based logging framework, including log levels, transports, and formats.","keywords":"logging, winston, log levels, transports, formats, console logging, file logging, HTTP logging, stream logging, debug mode","image":null},"headers":[],"relativePath":"logging.md","filePath":"logging.md","lastUpdated":1744532846000}'),n={name:"logging.md"};function l(o,s,p,r,h,d){return e(),a("div",null,s[0]||(s[0]=[t(`<h1 id="logging" tabindex="-1">Logging <a class="header-anchor" href="#logging" aria-label="Permalink to &quot;Logging&quot;">​</a></h1><p>When you build a production application, it often becomes crucial for you to know what is going on inside your application. Intent provides a robust <code>winston</code> based logging framework that allows you to log messages to files, system error logs. Logging is very crucial for any application. It is used to record any event when something occurs within (or affects) the application.</p><p>Application logging is the process of saving application events. With this information in hand, tech pros can assess threats and analyze errors before they disrupt broader business workflows.</p><p>Intent comes with simple methods to store all your application logs in the format and storage of your choice.</p><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to &quot;Configuration&quot;">​</a></h2><p>By default, all of the configurations for loggers are stored inside <code>config/logger.ts</code> . You would see a similar configuration as below</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Formats,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  LoggerOptions,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  LogLevel,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Transports,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@intentjs/core/logger&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { configNamespace } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;@intentjs/core/config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> configNamespace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;logger&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  default: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;app&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  disableConsole: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  loggers: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      level: LogLevel.debug,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      transports: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { transport: Transports.Console, format: Formats.Default },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          transport: Transports.File,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          format: Formats.Json,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          filename: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;intent.log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}));</span></span></code></pre></div><p>Out of the box, your application comes pre-configured with <code>file</code> and <code>console</code> based log.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>All of the logs are stored inside <code>storage/logs</code> directory.</p></div><h3 id="log-levels" tabindex="-1">Log Levels <a class="header-anchor" href="#log-levels" aria-label="Permalink to &quot;Log Levels&quot;">​</a></h3><p>Take note of the <code>level</code> configuration option. Intent currently supports the <a href="https://datatracker.ietf.org/doc/html/rfc5424#page-11" target="_blank" rel="noreferrer">RFC 5424 specification</a>. This option determins the minimum &quot;level&quot; a message must be in order to be logged. Each level is given an integer priority with the most severe being the lowest number and the least one being the highest.</p><p>To set the log level in your application, you can make use of the <code>LogLevel</code> enum from the <code>@intentjs/core/logger</code> package. It currently supports the following levels:</p><table tabindex="0"><thead><tr><th>Level</th><th>Description</th></tr></thead><tbody><tr><td><code>error</code></td><td>Whenever you encounter any Exception preventing one or more functionalities from properly functioning and want to log the information about that event</td></tr><tr><td><code>warn</code></td><td>The log level that indicates that something unexpected happened in the application, a problem, or a situation that might disturb one of the processes. But that doesn&#39;t mean that the application failed</td></tr><tr><td><code>info</code></td><td>The standard log level for logs indicating something happened,the application entered a certain state, some API called, etc.</td></tr><tr><td><code>http</code></td><td>This level is used to log HTTP request-related messages. HTTP transactions ranging from the host, path, response, requests, etc.</td></tr><tr><td><code>verbose</code></td><td>The Verbose level logs a message for both the activity start and end, plus the values of the variables and arguments that are used.</td></tr><tr><td><code>debug</code></td><td>The DEBUG log level should be used for information that may be needed for diagnosing issues and troubleshooting or when running application in the test environment for the purpose of making sure everything is running correctly.</td></tr><tr><td><code>silly</code></td><td>The current stack trace of the calling function should be printed out when silly messages are called. This information can be used to help developers and internal teams debug problems.</td></tr></tbody></table><p>Whichever <code>level</code> you select, the logs having level lower than that will be silenced.</p><h3 id="supported-transports" tabindex="-1">Supported Transports <a class="header-anchor" href="#supported-transports" aria-label="Permalink to &quot;Supported Transports&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Transport</th><th>Description</th></tr></thead><tbody><tr><td><code>Default</code> or <a href="https://github.com/winstonjs/winston/blob/master/docs/transports.md#console-transport" target="_blank" rel="noreferrer"><code>Console</code></a></td><td>This is the default transport and logs are printed on console.</td></tr><tr><td><a href="https://github.com/winstonjs/winston/blob/master/docs/transports.md#file-transport" target="_blank" rel="noreferrer"><code>File</code></a></td><td>This transport is used to store all your logs in a file.</td></tr><tr><td><a href="https://github.com/winstonjs/winston/blob/master/docs/transports.md#http-transport" target="_blank" rel="noreferrer"><code>HTTP</code></a></td><td>This transport is used to pass an Http url to send all your logs to some host.</td></tr><tr><td><a href="https://github.com/winstonjs/winston/blob/master/docs/transports.md#stream-transport" target="_blank" rel="noreferrer"><code>Stream</code></a></td><td>This transport is used to create a stream of logs and pass/save it according to your accord.</td></tr></tbody></table><h4 id="http-transport" tabindex="-1">HTTP Transport <a class="header-anchor" href="#http-transport" aria-label="Permalink to &quot;HTTP Transport&quot;">​</a></h4><p>If you want to post logs to an <code>http</code> endpoint, you can use the <code>HTTP</code> transport.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">transports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    transport: Transports.Http,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    format: Formats.Json,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      host: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;webhook.site&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      path: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;eee28314-b4ae-4706-a45f-719ee7e30a51&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ssl: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span></code></pre></div><h4 id="stream-transport" tabindex="-1">Stream Transport <a class="header-anchor" href="#stream-transport" aria-label="Permalink to &quot;Stream Transport&quot;">​</a></h4><p>If you want to post logs through a write stream, you can use the <code>stream</code> transport.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">transports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    format: Formats.Default,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    transport: Transports.Stream,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      stream: </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createWriteStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;storage/stream.log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h3 id="formats" tabindex="-1">Formats <a class="header-anchor" href="#formats" aria-label="Permalink to &quot;Formats&quot;">​</a></h3><p>Intent supports all of the formats that come preconfigured with <code>wintson</code>, so you free to use those formats.</p><p>To use any of the format mentioned below, you can use <code>Formats</code> enum from <code>@intentjs/core/logger</code>;</p><ul><li><code>Default</code></li><li><code>Simple</code></li><li><code>Align</code></li><li><code>Cli</code></li><li><code>Colorize</code></li><li><code>Combine</code></li><li><code>Errors</code></li><li><code>Json</code></li><li><code>Label</code></li><li><code>Logstash</code></li><li><code>Metadata</code></li><li><code>Ms</code></li><li><code>PadLevels</code></li><li><code>PrettyPrint</code></li><li><code>Printf</code></li><li><code>Splat</code></li><li><code>Timestamp</code></li><li><code>Uncolorize</code></li></ul><h3 id="disable-console-log" tabindex="-1">Disable Console Log <a class="header-anchor" href="#disable-console-log" aria-label="Permalink to &quot;Disable Console Log&quot;">​</a></h3><p>If you want to disable console based logs in your non-dev environments, irrespective of the level, transport or format. You can simply set the <code>disableConsole</code> value to true.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disableConsole</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><h2 id="writing-to-log" tabindex="-1">Writing to Log <a class="header-anchor" href="#writing-to-log" aria-label="Permalink to &quot;Writing to Log&quot;">​</a></h2><p>You can log almost any type of object. Let&#39;s take a simple look at how to do it.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Log } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@intentjs/core/logger&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// returns the default logger</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello world!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [debug] 2024-07-20T20:07:24.862Z : &quot;hello world!&quot;</span></span></code></pre></div><p>You can pass the <code>logger</code> name to the <code>Log</code> method that we configured in the <code>config/logger.ts</code> file to pick a specific logger type.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;app&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// returnts the &quot;app&quot; logger</span></span></code></pre></div><div class="info custom-block"><p class="custom-block-title">INFO</p><p>If you are using the default configuration, apart from console logging, the log will also be printed in the <code>storage/logs/intent.log</code> file.</p></div><p>Following methods are available for different log levels.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> logger</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello world!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">verbose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;verbose&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;info&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">warn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;warn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, e);</span></span></code></pre></div>`,37)]))}const c=i(n,[["render",l]]);export{g as __pageData,c as default};
